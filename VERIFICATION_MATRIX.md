# Verification Matrix

| ID   | Feature                                   | Command                                                                                             | Expected signal                                         | Status     | Evidence |
|------|-------------------------------------------|-----------------------------------------------------------------------------------------------------|----------------------------------------------------------|------------|----------|
| F001 | Metrics API authorised access             | `curl -s -H 'x-api-key: test-metrics-key' http://127.0.0.1:3101/api/metrics`                        | 200 OK with metrics array and meta.requestId             | VERIFIED   | [metrics_api_authorized](evidence/metrics_api_authorized.txt) |
| F002 | Metrics API authentication guard          | `curl -s -o /dev/null -w '%{http_code}\n' http://127.0.0.1:3101/api/metrics`                        | 401 with JSON error code `API_KEY_REQUIRED`             | VERIFIED   | [metrics_api_unauthorized](evidence/metrics_api_unauthorized.txt) |
| F003 | Telemetry API happy path                  | `curl -s -X POST http://127.0.0.1:3101/api/telemetry/page -H 'content-type: application/json' -d '{"metric":"render_duration_ms","value":123.45,"page":"home"}'` | 202 Accepted with `ok: true`                             | VERIFIED   | [telemetry_api_accept](evidence/telemetry_api_accept.txt) |
| F004 | Telemetry API validation                  | `curl -s -X POST http://127.0.0.1:3101/api/telemetry/page -H 'content-type: application/json' -d '{"metric":"","value":10}'` | 400 error `Metric name required`                         | VERIFIED   | [telemetry_api_invalid](evidence/telemetry_api_invalid.txt) |
| F005 | Metrics UI end-to-end via Playwright      | `METRICS_API_KEY=test-metrics-key NEXT_PUBLIC_METRICS_API_KEY=test-metrics-key npx playwright test tests/e2e/metrics.spec.ts --project=chromium --reporter=list` | All 5 Playwright specs pass                             | UNVERIFIED | [playwright_metrics](evidence/playwright_metrics.txt) |
| F006 | ESLint static analysis                    | `npm run lint`                                                                                      | `No ESLint warnings or errors`                           | VERIFIED   | [lint](evidence/lint.log) |
| F007 | Unit tests                                | `npm run test:unit`                                                                                 | All unit tests passed                                    | VERIFIED   | [unit-tests](evidence/unit-tests.log) |
